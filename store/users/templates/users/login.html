{% extends 'users/base.html' %}

{% block content %}
<h1>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h1>
{% if messages %}
  <div id="custom-alert" class="custom-alert 
    {% for message in messages %}
      {% if message.tags == 'success' %}
        alert-success
      {% else %}
        alert-warning
      {% endif %}
    {% endfor %}">
    <button class="close-btn" onclick="closeAlert()">√ó</button>
    {% for message in messages %}
      {{ message }}
    {% endfor %}
  </div>
{% elif form.non_field_errors %}
  <div id="custom-alert" class="custom-alert alert-warning">
    <button class="close-btn" onclick="closeAlert()">√ó</button>
    {{ form.non_field_errors }}
  </div>
{% endif %}
  <form action="{% url 'users:login' %}" method="POST">
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

    <div class="form-group">
      <label for="{{ form.username.id_for_label }}">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
      {{ form.username }}
      <!-- <input class="form-control py-4" type="text" id="username" name="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required> -->
    </div>

    <div class="form-group password-container">
      <label for="{{ form.password.id_for_label }}">–ü–∞—Ä–æ–ª—å</label>
      {{ form.password }}
      <!-- <input class="form-control py-4" type="password" id="password" name="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>  -->
      <span class="show-password" onclick="togglePassword()">üëÅÔ∏è</span> <!-- –ì–ª–∞–∑–∏–∫ –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª—è -->
      <span class="key-icon" onclick="autoFillPassword()">üîë</span> <!-- –ö–ª—é—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
    </div>

    <div class="forgot-password">
      <a href="#">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
    </div>

    <button type="submit" class="btn">–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</button>
    
    <div>
      <p>–ù—É–∂–µ–Ω –∞–∫–∫–∞—É–Ω—Ç? <a class="btn-link" href="{% url 'users:registration' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è!</a></p>
    </div>

    <div class="social-buttons">
      <button type="button" class="social-btn github"><i class="fab fa-github"></i> GitHub</button>
      <button type="button" class="social-btn google"><i class="fab fa-google"></i> Google</button>
    </div>

    <div class="social-buttons">
      <button type="button" class="social-btn vk"><i class="fab fa-vk"></i> VK</button>
      <button type="button" class="social-btn facebook"><i class="fab fa-facebook"></i> Facebook</button>
    </div>
  </form>
{% endblock %}

{% block scripts %}
  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
    function togglePassword() {
      var passwordField = document.querySelector("[name='password']");
      var passwordIcon = document.querySelector(".show-password");

      if (passwordField.type === "password") {
        passwordField.type = "text";  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
        passwordIcon.textContent = "üîí"; // –ò–∑–º–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–π –≥–ª–∞–∑
      } else {
        passwordField.type = "password";  // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
        passwordIcon.textContent = "üëÅÔ∏è"; // –ò–∑–º–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã–π –≥–ª–∞–∑
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
    function autoFillPassword() {
      var passwordField = document.querySelector("[name='password']");
      passwordField.value = "SavedPassword";  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–æ–ª—å –∏–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
    }
  </script>
{% endblock %}








